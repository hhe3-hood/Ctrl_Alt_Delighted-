<!doctype html>
<html lang="en">
  <head>
    {% include 'mainhead.html' %}

    <!-- Link both the calendar and navbar CSS files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='nav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='monthly.css') }}">

    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        const daysGrid = document.querySelector(".days-grid");
        const title = document.querySelector(".calendar-title");
        const subtitle = document.querySelector(".calendar-subtitle");

        // Get today's date
        const today = new Date();
        const month = today.getMonth(); // 0 = January
        const year = today.getFullYear();

        // Set header title
        const monthNames = [
          "January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"
        ];
        title.textContent = `${monthNames[month]} ${year}`;
        subtitle.textContent = "Monthly View";

        // Get first day and total days in month
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);

        const firstDayIndex = firstDay.getDay(); // 0 = Sunday
        const totalDays = lastDay.getDate();

        // Clear any existing days
        daysGrid.innerHTML = "";

        // Add empty days before start
        for (let i = 0; i < firstDayIndex; i++) {
          const empty = document.createElement("div");
          empty.classList.add("day", "empty");
          daysGrid.appendChild(empty);
        }

        // Add all days in month
        for (let i = 1; i <= totalDays; i++) {
          const day = document.createElement("div");
          day.classList.add("day");

          const dayNumber = document.createElement("span");
          dayNumber.classList.add("day-number");
          dayNumber.textContent = i;
          day.appendChild(dayNumber);

          // Highlight today's date
          if (
            i === today.getDate() &&
            month === today.getMonth() &&
            year === today.getFullYear()
          ) {
            day.classList.add("today");
          }

          daysGrid.appendChild(day);
        }

        // Fill remaining cells for full grid
        const totalCells = daysGrid.children.length;
        const extra = 7 - (totalCells % 7);
        if (extra < 7) {
          for (let i = 0; i < extra; i++) {
            const empty = document.createElement("div");
            empty.classList.add("day", "empty");
            daysGrid.appendChild(empty);
          }
        }
      });
    </script>
  </head>

  <body>
    <!-- âœ… Include your navigation bar -->
    {% include 'navigationBar.html' %}

    <div class="panel" style="padding-top: 100px;">
      <section class="calendar-page" aria-label="Calendar">
        <header class="calendar-header">
          <div class="calendar-title">Month YYYY</div>
          <div class="calendar-subtitle">Monthly View</div>
        </header>

        <div class="calendar-grid-wrapper">
          <!-- Weekday headings -->
          <div class="weekday-row">
            <div class="weekday">Sun</div>
            <div class="weekday">Mon</div>
            <div class="weekday">Tue</div>
            <div class="weekday">Wed</div>
            <div class="weekday">Thu</div>
            <div class="weekday">Fri</div>
            <div class="weekday">Sat</div>
          </div>

          <!-- Days grid generated by JS -->
          <div class="days-grid"></div>
        </div>
      </section>
    </div>
  </body>
</html>
